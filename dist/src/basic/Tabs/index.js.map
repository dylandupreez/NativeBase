{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["ScrollableTabView","props","state","currentPage","initialPage","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","initialRender","runAfterInteractions","goToPage","nextProps","children","updateSceneKeys","page","callback","setState","pageNumber","offset","scrollView","scrollTo","x","y","animated","scrollWithoutAnimation","OS","_onChangeTab","bind","newKeys","previousKeys","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","prerenderingSiblingsNumber","find","sceneKey","heading","map","e","offsetX","nativeEvent","contentOffset","_updateScrollValue","value","setValue","onScroll","Math","round","length","_updateSelectedPage","nextPage","localNextPage","position","prevPage","onChangeTab","i","ref","from","layout","requestAnimationFrame","Children","renderTabBar","cloneElement","scenes","_composeScenes","_onScroll","_onMomentumScrollEnd","locked","contentProps","overlayTabs","tabBarPosition","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","undefined","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","tabContainerStyle","style","left","right","styles","container","_handleLayout","renderScrollableContent","propTypes","oneOf","number","func","any","object","bool","defaultProps","create","flex","scrollableContentAndroid"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Dimensions, View, Animated, ScrollView, StyleSheet, Platform } from \"react-native\";\r\nimport PropTypes from \"prop-types\";\r\nimport { InteractionManager, ViewPropTypes } from \"../../Utils\"\r\nimport _ from \"lodash\";\r\n\r\nimport SceneComponent from \"./SceneComponent\";\r\nimport { DefaultTabBar } from \"./DefaultTabBar\";\r\nimport { ScrollableTabBar } from \"./ScrollableTabBar\";\r\n\r\nexport default class ScrollableTabView extends Component {\r\n    static propTypes = {\r\n        tabBarPosition: PropTypes.oneOf([\"top\", \"bottom\", \"overlayTop\", \"overlayBottom\"]),\r\n        initialPage: PropTypes.number,\r\n        //page: PropTypes.number,\r\n        onChangeTab: PropTypes.func,\r\n        onScroll: PropTypes.func,\r\n        renderTabBar: PropTypes.any,\r\n        style: ViewPropTypes.style,\r\n        contentProps: PropTypes.object,\r\n        scrollWithoutAnimation: PropTypes.bool,\r\n        locked: PropTypes.bool,\r\n        prerenderingSiblingsNumber: PropTypes.number,\r\n    };\r\n\r\n    static defaultProps = {\r\n        tabBarPosition: \"top\",\r\n        initialPage: 0,\r\n        //page: -1,\r\n        onChangeTab: () => { },\r\n        onScroll: () => { },\r\n        contentProps: {},\r\n        scrollWithoutAnimation: false,\r\n        locked: false,\r\n        prerenderingSiblingsNumber: 0,\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentPage: this.props.initialPage,\r\n            scrollValue: new Animated.Value(this.props.initialPage),\r\n            containerWidth: Dimensions.get(\"window\").width,\r\n            sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage }),\r\n            initialRender: true,\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        InteractionManager.runAfterInteractions(() => {\r\n            this.goToPage(this.props.initialPage);\r\n        });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps && nextProps.children !== this.props.children) {\r\n            this.updateSceneKeys({\r\n                page: this.state.currentPage,\r\n                children: nextProps.children,\r\n                callback: () => {\r\n                    if (nextProps.initialPage >= 0 && nextProps.initialPage !== this.props.initialPage) {\r\n                        this.setState({ initialRender: true }, () => this.goToPage(nextProps.initialPage));\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    goToPage(pageNumber) {\r\n        const offset = pageNumber * this.state.containerWidth;\r\n\r\n        if (this.scrollView) {\r\n            this.scrollView.scrollTo({\r\n                x: offset,\r\n                y: 0,\r\n                animated: !this.props.scrollWithoutAnimation,\r\n            });\r\n        }\r\n        if (Platform.OS === \"android\") {\r\n            const { currentPage } = this.state;\r\n            this.updateSceneKeys({\r\n                page: pageNumber,\r\n                callback: this._onChangeTab.bind(this, currentPage, pageNumber),\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    updateSceneKeys({ page, children = this.props.children, callback = () => { } }) {\r\n        let newKeys = this.newSceneKeys({\r\n            previousKeys: this.state.sceneKeys,\r\n            currentPage: page,\r\n            children,\r\n        });\r\n        this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\r\n    }\r\n\r\n    newSceneKeys({ previousKeys = [], currentPage = 0, children = this.props.children }) {\r\n        let newKeys = [];\r\n        this._children(children).forEach((child, idx) => {\r\n            let key = this._makeSceneKey(child, idx);\r\n            if (this._keyExists(previousKeys, key) || this._shouldRenderSceneKey(idx, currentPage)) {\r\n                newKeys.push(key);\r\n            }\r\n        });\r\n        return newKeys;\r\n    }\r\n\r\n    _shouldRenderSceneKey(idx, currentPageKey) {\r\n        let numOfSibling = this.props.prerenderingSiblingsNumber;\r\n        return idx < currentPageKey + numOfSibling + 1 && idx > currentPageKey - numOfSibling - 1;\r\n    }\r\n\r\n    _keyExists(sceneKeys, key) {\r\n        return sceneKeys.find(sceneKey => key === sceneKey);\r\n    }\r\n\r\n    _makeSceneKey(child, idx) {\r\n        return child.props.heading + \"_\" + idx;\r\n    }\r\n\r\n    _composeScenes() {\r\n        return this._children().map((child, idx) => {\r\n            let key = this._makeSceneKey(child, idx);\r\n            return (\r\n                <SceneComponent\r\n                    key={child.key}\r\n                    shouldUpdated={this._shouldRenderSceneKey(idx, this.state.currentPage)}\r\n                    style={{ width: this.state.containerWidth }}\r\n                >\r\n                    {this._keyExists(this.state.sceneKeys, key) ? (\r\n                        child\r\n                    ) : (\r\n                            <View heading={child.props.heading} />\r\n                        )}\r\n                </SceneComponent>\r\n            );\r\n        });\r\n    }\r\n    _onScroll(e) {\r\n        const offsetX = e.nativeEvent.contentOffset.x;\r\n        if (this.state.initialRender && Platform.OS === \"ios\") {\r\n            this.setState({ initialRender: false }, () => {\r\n                this._updateScrollValue(this.state.currentPage);\r\n            });\r\n        } else {\r\n            this._updateScrollValue(offsetX / this.state.containerWidth);\r\n        }\r\n\r\n\r\n    }\r\n\r\n    _updateScrollValue(value) {\r\n        this.state.scrollValue.setValue(value);\r\n        if (this.props.onScroll) {\r\n            this.props.onScroll(value);\r\n        }\r\n\r\n    }\r\n\r\n    _onMomentumScrollEnd(e) {\r\n        let offsetX = e.nativeEvent.contentOffset.x;\r\n        if (offsetX < 0) {\r\n            offsetX = offsetX * -1;\r\n        }\r\n        let page = Math.round(offsetX / this.state.containerWidth);\r\n\r\n        if (page >= this.props.children.length) {\r\n            page = this.props.children.length - 1;\r\n        }\r\n        if (this.state.currentPage !== page) {\r\n            this._updateSelectedPage(page);\r\n        }\r\n    }\r\n\r\n    _updateSelectedPage(nextPage) {\r\n        let localNextPage = nextPage;\r\n        if (typeof localNextPage === \"object\") {\r\n            localNextPage = nextPage.nativeEvent.position;\r\n        }\r\n\r\n        const { currentPage } = this.state;\r\n\r\n        this.updateSceneKeys({\r\n            page: localNextPage,\r\n            callback: this._onChangeTab.bind(this, currentPage, localNextPage),\r\n        });\r\n    }\r\n\r\n    _onChangeTab(prevPage, currentPage) {\r\n        this.props.onChangeTab({\r\n            i: currentPage,\r\n            ref: this._children()[currentPage],\r\n            from: prevPage,\r\n        });\r\n    }\r\n\r\n    _handleLayout(e) {\r\n        const { width } = e.nativeEvent.layout;\r\n        if (Math.round(width) !== Math.round(this.state.containerWidth)) {\r\n            this.setState({ containerWidth: width }, () => {\r\n                this.requestAnimationFrame(() => {\r\n                    this.goToPage(this.state.currentPage);\r\n                });\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    _children(children = this.props.children) {\r\n        return React.Children.map(children, child => child);\r\n    }\r\n\r\n    renderTabBar(props) {\r\n        if (this.props.renderTabBar === false) {\r\n            return null;\r\n        } else if (this.props.renderTabBar) {\r\n            return React.cloneElement(this.props.renderTabBar(props), props);\r\n        } else {\r\n            return <DefaultTabBar {...props} />;\r\n        }\r\n    }\r\n\r\n    renderScrollableContent() {\r\n        const scenes = this._composeScenes();\r\n        return (\r\n            <ScrollView\r\n                horizontal\r\n                pagingEnabled\r\n                automaticallyAdjustContentInsets={false}\r\n                contentOffset={{\r\n                    x: this.props.initialPage * this.state.containerWidth,\r\n                }}\r\n                ref={scrollView => {\r\n                    this.scrollView = scrollView;\r\n                }}\r\n                onScroll={e => this._onScroll(e)}\r\n                onMomentumScrollEnd={(e) => this._onMomentumScrollEnd(e)}\r\n                scrollEventThrottle={16}\r\n                scrollsToTop={false}\r\n                showsHorizontalScrollIndicator={false}\r\n                scrollEnabled={!this.props.locked}\r\n                directionalLockEnabled\r\n                alwaysBounceVertical={false}\r\n                keyboardDismissMode=\"on-drag\"\r\n                {...this.props.contentProps}\r\n            >\r\n                {scenes}\r\n            </ScrollView>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let overlayTabs =\r\n            this.props.tabBarPosition === \"overlayTop\" || this.props.tabBarPosition === \"overlayBottom\";\r\n\r\n        let tabBarProps = {\r\n            goToPage: (pageNumber) => this.goToPage(pageNumber),\r\n            tabs: this._children().map(child => child.props.heading),\r\n            tabStyle: this._children().map(child => child.props.tabStyle),\r\n            activeTabStyle: this._children().map(child => child.props.activeTabStyle),\r\n            textStyle: this._children().map(child => child.props.textStyle),\r\n            activeTextStyle: this._children().map(child => child.props.activeTextStyle),\r\n            tabHeaderStyle: this._children().map(child =>\r\n                _.get(child.props.heading.props, \"style\", undefined)\r\n            ),\r\n            activeTab: this.state.currentPage,\r\n            scrollValue: this.state.scrollValue,\r\n            containerWidth: this.state.containerWidth,\r\n        };\r\n\r\n        if (this.props.tabBarBackgroundColor) {\r\n            tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\r\n        }\r\n        if (this.props.tabBarActiveTextColor) {\r\n            tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\r\n        }\r\n        if (this.props.tabBarInactiveTextColor) {\r\n            tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\r\n        }\r\n        if (this.props.tabBarTextStyle) {\r\n            tabBarProps.textStyle = this.props.tabBarTextStyle;\r\n        }\r\n        if (this.props.tabBarUnderlineStyle) {\r\n            tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\r\n        }\r\n        if (this.props.tabContainerStyle) {\r\n            tabBarProps.tabContainerStyle = this.props.tabContainerStyle;\r\n        }\r\n        if (overlayTabs) {\r\n            tabBarProps.style = {\r\n                position: \"absolute\",\r\n                left: 0,\r\n                right: 0,\r\n                [this.props.tabBarPosition === \"overlayTop\" ? \"top\" : \"bottom\"]: 0,\r\n            };\r\n        }\r\n\r\n        return (\r\n            <View style={[styles.container, this.props.style]} onLayout={(e) => this._handleLayout(e)}>\r\n                {this.props.tabBarPosition === \"top\" && this.renderTabBar(tabBarProps)}\r\n                {this.renderScrollableContent()}\r\n                {(this.props.tabBarPosition === \"bottom\" || overlayTabs) && this.renderTabBar(tabBarProps)}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n    },\r\n    scrollableContentAndroid: {\r\n        flex: 1,\r\n    },\r\n});"]}