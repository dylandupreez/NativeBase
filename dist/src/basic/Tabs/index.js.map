<<<<<<< HEAD
{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["ScrollableTabView","props","initialRender","OS","state","currentPage","initialPage","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","goToPage","setTimeout","nextProps","children","updateSceneKeys","page","pageNumber","offset","scrollView","scrollTo","x","y","animated","scrollWithoutAnimation","callback","_onChangeTab","bind","newKeys","previousKeys","setState","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","prerenderingSiblingsNumber","find","sceneKey","heading","map","e","offsetX","nativeEvent","contentOffset","_updateScrollValue","value","setValue","onScroll","Math","round","_updateSelectedPage","nextPage","localNextPage","position","prevPage","onChangeTab","i","ref","from","layout","requestAnimationFrame","Children","renderTabBar","cloneElement","scenes","_composeScenes","_onScroll","_onMomentumScrollBeginAndEnd","locked","contentProps","overlayTabs","tabBarPosition","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","undefined","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","tabContainerStyle","style","left","right","styles","container","_handleLayout","renderScrollableContent","propTypes","oneOf","number","func","any","object","bool","defaultProps","onClass","create","flex","scrollableContentAndroid"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Dimensions, View, Animated, ScrollView, StyleSheet, Platform } from \"react-native\";\r\nimport TimerMixin from \"react-timer-mixin\";\r\nimport ReactMixin from \"react-mixin\";\r\nimport PropTypes from \"prop-types\";\r\nimport { InteractionManager, ViewPropTypes } from \"../../Utils\";\r\nimport _ from \"lodash\";\r\n\r\nimport SceneComponent from \"./SceneComponent\";\r\nimport { DefaultTabBar } from \"./DefaultTabBar\";\r\nimport { ScrollableTabBar } from \"./ScrollableTabBar\";\r\n\r\nclass ScrollableTabView extends Component {\r\n    static propTypes = {\r\n        tabBarPosition: PropTypes.oneOf([\"top\", \"bottom\", \"overlayTop\", \"overlayBottom\"]),\r\n        initialPage: PropTypes.number,\r\n        page: PropTypes.number,\r\n        onChangeTab: PropTypes.func,\r\n        onScroll: PropTypes.func,\r\n        renderTabBar: PropTypes.any,\r\n        style: ViewPropTypes.style,\r\n        contentProps: PropTypes.object,\r\n        scrollWithoutAnimation: PropTypes.bool,\r\n        locked: PropTypes.bool,\r\n        prerenderingSiblingsNumber: PropTypes.number,\r\n    };\r\n\r\n    static defaultProps = {\r\n        tabBarPosition: \"top\",\r\n        initialPage: 0,\r\n        page: -1,\r\n        onChangeTab: () => { },\r\n        onScroll: () => { },\r\n        contentProps: {},\r\n        scrollWithoutAnimation: false,\r\n        locked: false,\r\n        prerenderingSiblingsNumber: 0,\r\n    };\r\n\r\n    initialRender = Platform.OS === \"ios\";\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            currentPage: this.props.initialPage,\r\n            scrollValue: new Animated.Value(this.props.initialPage),\r\n            containerWidth: Dimensions.get(\"window\").width,\r\n            sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage }),\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (Platform.OS === \"android\") {\r\n            this.goToPage(0);\r\n            this.setTimeout(() => this.goToPage(this.props.initialPage), 0);\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n\r\n        if (this.initialRender) {\r\n            this.initialRender = false;\r\n        }\r\n        if (nextProps.children !== this.props.children) {\r\n            this.updateSceneKeys({\r\n                page: this.state.currentPage,\r\n                children: nextProps.children,\r\n            });\r\n        }\r\n        if (nextProps.page >= 0 && nextProps.page !== this.state.currentPage) {\r\n            this.goToPage(nextProps.page);\r\n        }\r\n    }\r\n\r\n    goToPage(pageNumber) {\r\n        const offset = pageNumber * this.state.containerWidth;\r\n\r\n        if (this.scrollView) {\r\n            this.scrollView.scrollTo({\r\n                x: offset,\r\n                y: 0,\r\n                animated: !this.props.scrollWithoutAnimation,\r\n            });\r\n        }\r\n\r\n        const { currentPage } = this.state;\r\n        this.updateSceneKeys({\r\n            page: pageNumber,\r\n            callback: this._onChangeTab.bind(this, currentPage, pageNumber),\r\n        });\r\n\r\n\r\n    }\r\n\r\n    updateSceneKeys({ page, children = this.props.children, callback = () => { } }) {\r\n        let newKeys = this.newSceneKeys({\r\n            previousKeys: this.state.sceneKeys,\r\n            currentPage: page,\r\n            children,\r\n        });\r\n        this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\r\n    }\r\n\r\n    newSceneKeys({ previousKeys = [], currentPage = 0, children = this.props.children }) {\r\n        let newKeys = [];\r\n        this._children(children).forEach((child, idx) => {\r\n            let key = this._makeSceneKey(child, idx);\r\n            if (this._keyExists(previousKeys, key) || this._shouldRenderSceneKey(idx, currentPage)) {\r\n                newKeys.push(key);\r\n            }\r\n        });\r\n        return newKeys;\r\n    }\r\n\r\n    _shouldRenderSceneKey(idx, currentPageKey) {\r\n        let numOfSibling = this.props.prerenderingSiblingsNumber;\r\n        return idx < currentPageKey + numOfSibling + 1 && idx > currentPageKey - numOfSibling - 1;\r\n    }\r\n\r\n    _keyExists(sceneKeys, key) {\r\n        return sceneKeys.find(sceneKey => key === sceneKey);\r\n    }\r\n\r\n    _makeSceneKey(child, idx) {\r\n        return child.props.heading + \"_\" + idx;\r\n    }\r\n\r\n    _composeScenes() {\r\n        return this._children().map((child, idx) => {\r\n            let key = this._makeSceneKey(child, idx);\r\n            return (\r\n                <SceneComponent\r\n                    key={child.key}\r\n                    shouldUpdated={this._shouldRenderSceneKey(idx, this.state.currentPage)}\r\n                    style={{ width: this.state.containerWidth }}\r\n                >\r\n                    {this._keyExists(this.state.sceneKeys, key) ? (\r\n                        child\r\n                    ) : (\r\n                            <View heading={child.props.heading} />\r\n                        )}\r\n                </SceneComponent>\r\n            );\r\n        });\r\n    }\r\n    _onScroll(e) {\r\n\r\n        if (!this.initialRender) {\r\n            const offsetX = e.nativeEvent.contentOffset.x;\r\n            this._updateScrollValue(offsetX / this.state.containerWidth);\r\n        }\r\n    }\r\n\r\n    _updateScrollValue(value) {\r\n        this.state.scrollValue.setValue(value);\r\n        if (this.props.onScroll) {\r\n            this.props.onScroll(value);\r\n        }\r\n    }\r\n\r\n    _onMomentumScrollBeginAndEnd(e) {\r\n        const offsetX = e.nativeEvent.contentOffset.x;\r\n        const page = Math.round(offsetX / this.state.containerWidth);\r\n        if (this.state.currentPage !== page) {\r\n            this._updateSelectedPage(page);\r\n        }\r\n        if (this.initialRender) {\r\n            this.initialRender = false;\r\n        }\r\n    }\r\n\r\n    _updateSelectedPage(nextPage) {\r\n        let localNextPage = nextPage;\r\n        if (typeof localNextPage === \"object\") {\r\n            localNextPage = nextPage.nativeEvent.position;\r\n        }\r\n        const { currentPage } = this.state;\r\n\r\n        this.updateSceneKeys({\r\n            page: localNextPage,\r\n            callback: this._onChangeTab.bind(this, currentPage, localNextPage),\r\n        });\r\n    }\r\n\r\n    _onChangeTab(prevPage, currentPage) {\r\n        this.props.onChangeTab({\r\n            i: currentPage,\r\n            ref: this._children()[currentPage],\r\n            from: prevPage,\r\n        });\r\n    }\r\n\r\n    _handleLayout(e) {\r\n        const { width } = e.nativeEvent.layout;\r\n        if (Math.round(width) !== Math.round(this.state.containerWidth)) {\r\n            this.setState({ containerWidth: width }, () => {\r\n                this.requestAnimationFrame(() => {\r\n                    this.goToPage(this.state.currentPage);\r\n                });\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    _children(children = this.props.children) {\r\n        return React.Children.map(children, child => child);\r\n    }\r\n\r\n    renderTabBar(props) {\r\n        if (this.props.renderTabBar === false) {\r\n            return null;\r\n        } else if (this.props.renderTabBar) {\r\n            return React.cloneElement(this.props.renderTabBar(props), props);\r\n        } else {\r\n            return <DefaultTabBar {...props} />;\r\n        }\r\n    }\r\n\r\n    renderScrollableContent() {\r\n        const scenes = this._composeScenes();\r\n        return (\r\n            <ScrollView\r\n                horizontal\r\n                pagingEnabled\r\n                automaticallyAdjustContentInsets={false}\r\n                contentOffset={{\r\n                    x: this.props.initialPage * this.state.containerWidth\r\n                }}\r\n                ref={scrollView => {\r\n                    this.scrollView = scrollView;\r\n                }}\r\n                onScroll={e => this._onScroll(e)}\r\n                onMomentumScrollBegin={(e) => this._onMomentumScrollBeginAndEnd(e)}\r\n                onMomentumScrollEnd={(e) => this._onMomentumScrollBeginAndEnd(e)}\r\n                scrollEventThrottle={16}\r\n                scrollsToTop={false}\r\n                showsHorizontalScrollIndicator={false}\r\n                scrollEnabled={!this.props.locked}\r\n                directionalLockEnabled\r\n                alwaysBounceVertical={false}\r\n                keyboardDismissMode=\"on-drag\"\r\n                {...this.props.contentProps}\r\n            >\r\n                {scenes}\r\n            </ScrollView>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let overlayTabs =\r\n            this.props.tabBarPosition === \"overlayTop\" || this.props.tabBarPosition === \"overlayBottom\";\r\n\r\n        let tabBarProps = {\r\n            goToPage: (pageNumber) => this.goToPage(pageNumber),\r\n            tabs: this._children().map(child => child.props.heading),\r\n            tabStyle: this._children().map(child => child.props.tabStyle),\r\n            activeTabStyle: this._children().map(child => child.props.activeTabStyle),\r\n            textStyle: this._children().map(child => child.props.textStyle),\r\n            activeTextStyle: this._children().map(child => child.props.activeTextStyle),\r\n            tabHeaderStyle: this._children().map(child =>\r\n                _.get(child.props.heading.props, \"style\", undefined)\r\n            ),\r\n            activeTab: this.state.currentPage,\r\n            scrollValue: this.state.scrollValue,\r\n            containerWidth: this.state.containerWidth,\r\n        };\r\n\r\n        if (this.props.tabBarBackgroundColor) {\r\n            tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\r\n        }\r\n        if (this.props.tabBarActiveTextColor) {\r\n            tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\r\n        }\r\n        if (this.props.tabBarInactiveTextColor) {\r\n            tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\r\n        }\r\n        if (this.props.tabBarTextStyle) {\r\n            tabBarProps.textStyle = this.props.tabBarTextStyle;\r\n        }\r\n        if (this.props.tabBarUnderlineStyle) {\r\n            tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\r\n        }\r\n        if (this.props.tabContainerStyle) {\r\n            tabBarProps.tabContainerStyle = this.props.tabContainerStyle;\r\n        }\r\n        if (overlayTabs) {\r\n            tabBarProps.style = {\r\n                position: \"absolute\",\r\n                left: 0,\r\n                right: 0,\r\n                [this.props.tabBarPosition === \"overlayTop\" ? \"top\" : \"bottom\"]: 0,\r\n            };\r\n        }\r\n\r\n        return (\r\n            <View style={[styles.container, this.props.style]} onLayout={(e) => this._handleLayout(e)}>\r\n                {this.props.tabBarPosition === \"top\" && this.renderTabBar(tabBarProps)}\r\n                {this.renderScrollableContent()}\r\n                {(this.props.tabBarPosition === \"bottom\" || overlayTabs) && this.renderTabBar(tabBarProps)}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ReactMixin.onClass(ScrollableTabView, TimerMixin);\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n    },\r\n    scrollableContentAndroid: {\r\n        flex: 1,\r\n    },\r\n});"]}
=======
{"version":3,"sources":["../../../../src/basic/Tabs/index.js"],"names":["React","require","Component","ReactNative","Dimensions","View","Animated","ScrollView","StyleSheet","Platform","TimerMixin","SceneComponent","DefaultTabBar","ScrollableTabBar","ScrollableTabView","mixins","statics","propTypes","tabBarPosition","oneOf","initialPage","number","page","onChangeTab","func","onScroll","renderTabBar","any","style","contentProps","object","scrollWithoutAnimation","bool","locked","prerenderingSiblingsNumber","getDefaultProps","getInitialState","currentPage","props","scrollValue","Value","containerWidth","get","width","sceneKeys","newSceneKeys","componentDidMount","scrollFn","scrollView","state","setValue","runAfterInteractions","componentWillReceiveProps","children","updateSceneKeys","goToPage","pageNumber","offset","scrollTo","x","y","animated","callback","_onChangeTab","bind","cloneElement","newKeys","previousKeys","setState","_children","forEach","child","idx","key","_makeSceneKey","_keyExists","_shouldRenderSceneKey","push","currentPageKey","numOfSibling","find","sceneKey","heading","renderScrollableContent","scenes","_composeScenes","offsetX","e","nativeEvent","contentOffset","_updateScrollValue","_onMomentumScrollBeginAndEnd","map","Math","round","_updateSelectedPage","nextPage","localNextPage","position","prevPage","i","ref","from","value","_handleLayout","layout","requestAnimationFrame","Children","render","overlayTabs","tabBarProps","tabs","tabStyle","activeTabStyle","textStyle","activeTextStyle","tabHeaderStyle","undefined","activeTab","tabBarBackgroundColor","backgroundColor","tabBarActiveTextColor","activeTextColor","tabBarInactiveTextColor","inactiveTextColor","tabBarTextStyle","tabBarUnderlineStyle","underlineStyle","tabContainerStyle","left","right","styles","container","create","flex","scrollableContentAndroid"],"mappings":";;AAEA,qC;AACA,oD;;;;;;;;;;AAUA;;AAEA,8B,sTAfA,GAAMA,OAAQC,QAAQ,OAAR,CAAd,C,GACQC,U,CAAcF,K,CAAdE,S,CAGR,GAAMC,aAAcF,QAAQ,cAAR,CAApB,C,GAEEG,W,CAMED,W,CANFC,U,CACAC,I,CAKEF,W,CALFE,I,CACAC,Q,CAIEH,W,CAJFG,Q,CACAC,U,CAGEJ,W,CAHFI,U,CACAC,U,CAEEL,W,CAFFK,U,CACAC,Q,CACEN,W,CADFM,Q,CAGF,GAAMC,YAAaT,QAAQ,mBAAR,CAAnB;;AAGA,GAAMU,gBAAiBV,QAAQ,kBAAR,CAAvB,C;AAC0BA,QAAQ,iBAAR,C,CAAlBW,a,UAAAA,a;AACqBX,QAAQ,oBAAR,C,CAArBY,gB,WAAAA,gB;;AAER,GAAMC,mBAAoB,+BAAiB;AACzCC,OAAQ,CAACL,UAAD,CADiC;AAEzCM,QAAS;AACPJ,2BADO;AAEPC,iCAFO,CAFgC;;;AAOzCI,UAAW;AACTC,eAAgB,oBAAUC,KAAV,CAAgB,CAAC,KAAD,CAAQ,QAAR,CAAkB,YAAlB,CAAgC,eAAhC,CAAhB,CADP;AAETC,YAAa,oBAAUC,MAFd;AAGTC,KAAM,oBAAUD,MAHP;AAITE,YAAa,oBAAUC,IAJd;AAKTC,SAAU,oBAAUD,IALX;AAMTE,aAAc,oBAAUC,GANf;AAOTC,MAAO,qBAAcA,KAPZ;AAQTC,aAAc,oBAAUC,MARf;AASTC,uBAAwB,oBAAUC,IATzB;AAUTC,OAAQ,oBAAUD,IAVT;AAWTE,2BAA4B,oBAAUb,MAX7B,CAP8B;;;AAqBzCc,eArByC,2BAqBvB;AAChB,MAAO;AACLjB,eAAgB,KADX;AAELE,YAAa,CAFR;AAGLE,KAAM,CAAC,CAHF;AAILC,YAAa,sBAAM,CAAE,CAJhB;AAKLE,SAAU,mBAAM,CAAE,CALb;AAMLI,aAAc,EANT;AAOLE,uBAAwB,KAPnB;AAQLE,OAAQ,KARH;AASLC,2BAA4B,CATvB,CAAP;;AAWD,CAjCwC;;AAmCzCE,eAnCyC,2BAmCvB;AAChB,MAAO;AACLC,YAAa,KAAKC,KAAL,CAAWlB,WADnB;AAELmB,YAAa,GAAIjC,UAASkC,KAAb,CAAmB,KAAKF,KAAL,CAAWlB,WAA9B,CAFR;AAGLqB,eAAgBrC,WAAWsC,GAAX,CAAe,QAAf,EAAyBC,KAHpC;AAILC,UAAW,KAAKC,YAAL,CAAkB,CAAER,YAAa,KAAKC,KAAL,CAAWlB,WAA1B,CAAlB,CAJN,CAAP;;AAMD,CA1CwC;;AA4CzC0B,iBA5CyC,6BA4CrB;AAClB,GAAMC,UAAW,QAAXA,SAAW,EAAM;AACrB,GAAI,MAAKC,UAAT,CAAqB;AACnB,MAAKC,KAAL,CAAWV,WAAX,CAAuBW,QAAvB,CAAgC,MAAKZ,KAAL,CAAWlB,WAA3C;AACD;AACF,CAJD;AAKA,0BAAmB+B,oBAAnB,CAAwCJ,QAAxC;AACD,CAnDwC;;AAqDzCK,yBArDyC,oCAqDfd,KArDe,CAqDR;AAC/B,GAAIA,MAAMe,QAAN,GAAmB,KAAKf,KAAL,CAAWe,QAAlC,CAA4C;AAC1C,KAAKC,eAAL,CAAqB;AACnBhC,KAAM,KAAK2B,KAAL,CAAWZ,WADE;AAEnBgB,SAAUf,MAAMe,QAFG,CAArB;;AAID;;AAED,GAAIf,MAAMhB,IAAN,EAAc,CAAd,EAAmBgB,MAAMhB,IAAN,GAAe,KAAK2B,KAAL,CAAWZ,WAAjD,CAA8D;AAC5D,KAAKkB,QAAL,CAAcjB,MAAMhB,IAApB;AACD;AACF,CAhEwC;;AAkEzCiC,QAlEyC,mBAkEhCC,UAlEgC,CAkEpB;AACnB,GAAMC,QAASD,WAAa,KAAKP,KAAL,CAAWR,cAAvC;AACA,GAAI,KAAKO,UAAT,CAAqB;AACnB,KAAKA,UAAL,CAAgBU,QAAhB,CAAyB;AACvBC,EAAGF,MADoB;AAEvBG,EAAG,CAFoB;AAGvBC,SAAU,CAAC,KAAKvB,KAAL,CAAWP,sBAHC,CAAzB;;AAKD;;AAED,GAAMM,aAAc,KAAKY,KAAL,CAAWZ,WAA/B;AACA,KAAKiB,eAAL,CAAqB;AACnBhC,KAAMkC,UADa;AAEnBM,SAAU,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAA6B3B,WAA7B,CAA0CmB,UAA1C,CAFS,CAArB;;AAID,CAjFwC;;AAmFzC9B,YAnFyC,uBAmF5BY,KAnF4B,CAmFrB;AAClB,GAAI,KAAKA,KAAL,CAAWZ,YAAX,GAA4B,KAAhC,CAAuC;AACrC,MAAO,KAAP;AACD,CAFD,IAEO,IAAI,KAAKY,KAAL,CAAWZ,YAAf,CAA6B;AAClC,MAAO1B,OAAMiE,YAAN,CAAmB,KAAK3B,KAAL,CAAWZ,YAAX,CAAwBY,KAAxB,CAAnB,CAAmDA,KAAnD,CAAP;AACD,CAFM,IAEA;AACL,MAAO,qBAAC,aAAD,aAAmBA,KAAnB,oDAAP;AACD;AACF,CA3FwC;;AA6FzCgB,eA7FyC,+BA6FsC,IAA7DhC,KAA6D,MAA7DA,IAA6D,oBAAvD+B,QAAuD,CAAvDA,QAAuD,2BAA5C,KAAKf,KAAL,CAAWe,QAAiC,kCAAvBS,QAAuB,CAAvBA,QAAuB,2BAAZ,UAAM,CAAE,CAAI;AAC7E,GAAII,SAAU,KAAKrB,YAAL,CAAkB;AAC9BsB,aAAc,KAAKlB,KAAL,CAAWL,SADK;AAE9BP,YAAaf,IAFiB;AAG9B+B,iBAH8B,CAAlB,CAAd;;AAKA,KAAKe,QAAL,CAAc,CAAE/B,YAAaf,IAAf,CAAqBsB,UAAWsB,OAAhC,CAAd,CAAyDJ,QAAzD;AACD,CApGwC;;AAsGzCjB,YAtGyC,6BAsG4C,8CAAtEsB,YAAsE,CAAtEA,YAAsE,gCAAvD,EAAuD,4CAAnD9B,WAAmD,CAAnDA,WAAmD,+BAArC,CAAqC,wCAAlCgB,QAAkC,CAAlCA,QAAkC,4BAAvB,KAAKf,KAAL,CAAWe,QAAY;AACnF,GAAIa,SAAU,EAAd;AACA,KAAKG,SAAL,CAAehB,QAAf,EAAyBiB,OAAzB,CAAiC,SAACC,KAAD,CAAQC,GAAR,CAAgB;AAC/C,GAAIC,KAAM,OAAKC,aAAL,CAAmBH,KAAnB,CAA0BC,GAA1B,CAAV;AACA,GAAI,OAAKG,UAAL,CAAgBR,YAAhB,CAA8BM,GAA9B,GAAsC,OAAKG,qBAAL,CAA2BJ,GAA3B,CAAgCnC,WAAhC,CAA1C,CAAwF;AACtF6B,QAAQW,IAAR,CAAaJ,GAAb;AACD;AACF,CALD;AAMA,MAAOP,QAAP;AACD,CA/GwC;;AAiHzCU,qBAjHyC,gCAiHnBJ,GAjHmB,CAiHdM,cAjHc,CAiHE;AACzC,GAAIC,cAAe,KAAKzC,KAAL,CAAWJ,0BAA9B;AACA,MAAOsC,KAAMM,eAAiBC,YAAjB,CAAgC,CAAtC,EAA2CP,IAAMM,eAAiBC,YAAjB,CAAgC,CAAxF;AACD,CApHwC;;AAsHzCJ,UAtHyC,qBAsH9B/B,SAtH8B,CAsHnB6B,GAtHmB,CAsHd;AACzB,MAAO7B,WAAUoC,IAAV,CAAe,yBAAYP,OAAQQ,QAApB,EAAf,CAAP;AACD,CAxHwC;;AA0HzCP,aA1HyC,wBA0H3BH,KA1H2B,CA0HpBC,GA1HoB,CA0Hf;AACxB,MAAOD,OAAMjC,KAAN,CAAY4C,OAAZ,CAAsB,GAAtB,CAA4BV,GAAnC;AACD,CA5HwC;;AA8HzCW,uBA9HyC,mCA8Hf;AACxB,GAAMC,QAAS,KAAKC,cAAL,EAAf;AACA;AACE,oBAAC,UAAD;AACE,eADF;AAEE,kBAFF;AAGE,iCAAkC,KAHpC;AAIE,cAAe;AACb1B,EAAG,KAAKrB,KAAL,CAAWlB,WAAX,CAAyB,KAAK6B,KAAL,CAAWR,cAD1B,CAJjB;;AAOE,IAAK,wBAAc;AACjB,OAAKO,UAAL,CAAkBA,UAAlB;AACD,CATH;AAUE,SAAU,oBAAK;AACb,GAAMsC,SAAUC,EAAEC,WAAF,CAAcC,aAAd,CAA4B9B,CAA5C;AACA,OAAK+B,kBAAL,CAAwBJ,QAAU,OAAKrC,KAAL,CAAWR,cAA7C;AACD,CAbH;AAcE,sBAAuB,KAAKkD,4BAd9B;AAeE,oBAAqB,KAAKA,4BAf5B;AAgBE,oBAAqB,EAhBvB;AAiBE,aAAc,KAjBhB;AAkBE,+BAAgC,KAlBlC;AAmBE,cAAe,CAAC,KAAKrD,KAAL,CAAWL,MAnB7B;AAoBE,2BApBF;AAqBE,qBAAsB,KArBxB;AAsBE,oBAAoB,SAtBtB;AAuBM,KAAKK,KAAL,CAAWT,YAvBjB;;AAyBGuD,MAzBH,CADF;;;AA6BD,CA7JwC;;AA+JzCC,cA/JyC,0BA+JxB;AACf,MAAO,MAAKhB,SAAL,GAAiBuB,GAAjB,CAAqB,SAACrB,KAAD,CAAQC,GAAR,CAAgB;AAC1C,GAAIC,KAAM,OAAKC,aAAL,CAAmBH,KAAnB,CAA0BC,GAA1B,CAAV;AACA;AACE,oBAAC,cAAD;AACE,IAAKD,MAAME,GADb;AAEE,cAAe,OAAKG,qBAAL,CAA2BJ,GAA3B,CAAgC,OAAKvB,KAAL,CAAWZ,WAA3C,CAFjB;AAGE,MAAO,CAAEM,MAAO,OAAKM,KAAL,CAAWR,cAApB,CAHT;;AAKG,OAAKkC,UAAL,CAAgB,OAAK1B,KAAL,CAAWL,SAA3B,CAAsC6B,GAAtC;AACCF,KADD;;AAGC,oBAAC,IAAD,EAAM,QAASA,MAAMjC,KAAN,CAAY4C,OAA3B,kDARJ,CADF;;;;AAaD,CAfM,CAAP;AAgBD,CAhLwC;;AAkLzCS,4BAlLyC,uCAkLZJ,CAlLY,CAkLT;AAC9B,GAAMD,SAAUC,EAAEC,WAAF,CAAcC,aAAd,CAA4B9B,CAA5C;AACA,GAAMrC,MAAOuE,KAAKC,KAAL,CAAWR,QAAU,KAAKrC,KAAL,CAAWR,cAAhC,CAAb;AACA,GAAI,KAAKQ,KAAL,CAAWZ,WAAX,GAA2Bf,IAA/B,CAAqC;AACnC,KAAKyE,mBAAL,CAAyBzE,IAAzB;AACD;AACF,CAxLwC;;AA0LzCyE,mBA1LyC,8BA0LrBC,QA1LqB,CA0LX;AAC5B,GAAIC,eAAgBD,QAApB;AACA,GAAI,MAAOC,cAAP,GAAyB,QAA7B,CAAuC;AACrCA,cAAgBD,SAASR,WAAT,CAAqBU,QAArC;AACD;;AAED,GAAM7D,aAAc,KAAKY,KAAL,CAAWZ,WAA/B;AACA,KAAKiB,eAAL,CAAqB;AACnBhC,KAAM2E,aADa;AAEnBnC,SAAU,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAA6B3B,WAA7B,CAA0C4D,aAA1C,CAFS,CAArB;;AAID,CArMwC;;AAuMzClC,YAvMyC,uBAuM5BoC,QAvM4B,CAuMlB9D,WAvMkB,CAuML;AAClC,KAAKC,KAAL,CAAWf,WAAX,CAAuB;AACrB6E,EAAG/D,WADkB;AAErBgE,IAAK,KAAKhC,SAAL,GAAiBhC,WAAjB,CAFgB;AAGrBiE,KAAMH,QAHe,CAAvB;;AAKD,CA7MwC;;AA+MzCT,kBA/MyC,6BA+MtBa,KA/MsB,CA+Mf;AACxB,KAAKtD,KAAL,CAAWV,WAAX,CAAuBW,QAAvB,CAAgCqD,KAAhC;AACA,KAAKjE,KAAL,CAAWb,QAAX,CAAoB8E,KAApB;AACD,CAlNwC;;AAoNzCC,aApNyC,wBAoN3BjB,CApN2B,CAoNxB;AACP5C,KADO,CACG4C,EAAEC,WAAF,CAAciB,MADjB,CACP9D,KADO;;AAGf,GAAIkD,KAAKC,KAAL,CAAWnD,KAAX,IAAsBkD,KAAKC,KAAL,CAAW,KAAK7C,KAAL,CAAWR,cAAtB,CAA1B,CAAiE;AAC/D,KAAK2B,QAAL,CAAc,CAAE3B,eAAgBE,KAAlB,CAAd;AACA,KAAK+D,qBAAL,CAA2B,UAAM;AAC/B,OAAKnD,QAAL,CAAc,OAAKN,KAAL,CAAWZ,WAAzB;AACD,CAFD;AAGD;AACF,CA7NwC;;AA+NzCgC,SA/NyC,qBA+NC,IAAhChB,SAAgC,2DAArB,KAAKf,KAAL,CAAWe,QAAU;AACxC,MAAOrD,OAAM2G,QAAN,CAAef,GAAf,CAAmBvC,QAAnB,CAA6B,sBAASkB,MAAT,EAA7B,CAAP;AACD,CAjOwC;;AAmOzCqC,MAnOyC,kBAmOhC;AACP,GAAIC;AACF,KAAKvE,KAAL,CAAWpB,cAAX,GAA8B,YAA9B,EAA8C,KAAKoB,KAAL,CAAWpB,cAAX,GAA8B,eAD9E;AAEA,GAAI4F,aAAc;AAChBvD,SAAU,KAAKA,QADC;AAEhBwD,KAAM,KAAK1C,SAAL,GAAiBuB,GAAjB,CAAqB,sBAASrB,OAAMjC,KAAN,CAAY4C,OAArB,EAArB,CAFU;AAGhB8B,SAAU,KAAK3C,SAAL,GAAiBuB,GAAjB,CAAqB,sBAASrB,OAAMjC,KAAN,CAAY0E,QAArB,EAArB,CAHM;AAIhBC,eAAgB,KAAK5C,SAAL,GAAiBuB,GAAjB,CAAqB,sBAASrB,OAAMjC,KAAN,CAAY2E,cAArB,EAArB,CAJA;AAKhBC,UAAW,KAAK7C,SAAL,GAAiBuB,GAAjB,CAAqB,sBAASrB,OAAMjC,KAAN,CAAY4E,SAArB,EAArB,CALK;AAMhBC,gBAAiB,KAAK9C,SAAL,GAAiBuB,GAAjB,CAAqB,sBAASrB,OAAMjC,KAAN,CAAY6E,eAArB,EAArB,CAND;AAOhBC,eAAgB,KAAK/C,SAAL,GAAiBuB,GAAjB,CAAqB;AACnC,iBAAElD,GAAF,CAAM6B,MAAMjC,KAAN,CAAY4C,OAAZ,CAAoB5C,KAA1B,CAAiC,OAAjC,CAA0C+E,SAA1C,CADmC,GAArB,CAPA;;AAUhBC,UAAW,KAAKrE,KAAL,CAAWZ,WAVN;AAWhBE,YAAa,KAAKU,KAAL,CAAWV,WAXR;AAYhBE,eAAgB,KAAKQ,KAAL,CAAWR,cAZX,CAAlB;;;AAeA,GAAI,KAAKH,KAAL,CAAWiF,qBAAf,CAAsC;AACpCT,YAAYU,eAAZ,CAA8B,KAAKlF,KAAL,CAAWiF,qBAAzC;AACD;AACD,GAAI,KAAKjF,KAAL,CAAWmF,qBAAf,CAAsC;AACpCX,YAAYY,eAAZ,CAA8B,KAAKpF,KAAL,CAAWmF,qBAAzC;AACD;AACD,GAAI,KAAKnF,KAAL,CAAWqF,uBAAf,CAAwC;AACtCb,YAAYc,iBAAZ,CAAgC,KAAKtF,KAAL,CAAWqF,uBAA3C;AACD;AACD,GAAI,KAAKrF,KAAL,CAAWuF,eAAf,CAAgC;AAC9Bf,YAAYI,SAAZ,CAAwB,KAAK5E,KAAL,CAAWuF,eAAnC;AACD;AACD,GAAI,KAAKvF,KAAL,CAAWwF,oBAAf,CAAqC;AACnChB,YAAYiB,cAAZ,CAA6B,KAAKzF,KAAL,CAAWwF,oBAAxC;AACD;AACD,GAAI,KAAKxF,KAAL,CAAW0F,iBAAf,CAAkC;AAChClB,YAAYkB,iBAAZ,CAAgC,KAAK1F,KAAL,CAAW0F,iBAA3C;AACD;AACD,GAAInB,WAAJ,CAAiB;AACfC,YAAYlF,KAAZ;AACEsE,SAAU,UADZ;AAEE+B,KAAM,CAFR;AAGEC,MAAO,CAHT;AAIG,KAAK5F,KAAL,CAAWpB,cAAX,GAA8B,YAA9B,CAA6C,KAA7C,CAAqD,QAJxD,CAImE,CAJnE;AAKmB,0BALnB;;AAOD;;AAED;AACE,oBAAC,IAAD,EAAM,MAAO,CAACiH,OAAOC,SAAR,CAAmB,KAAK9F,KAAL,CAAWV,KAA9B,CAAb,CAAmD,SAAU,KAAK4E,aAAlE;AACG,CAAC,KAAKlE,KAAL,CAAWpB,cAAX,GAA8B,KAA9B,EAAuC,KAAKoB,KAAL,CAAWpB,cAAX,GAA4B,YAApE,GAAoF,KAAKQ,YAAL,CAAkBoF,WAAlB,CADvF;AAEG,KAAK3B,uBAAL,EAFH;AAGG,CAAC,KAAK7C,KAAL,CAAWpB,cAAX,GAA8B,QAA9B,EAA0C,KAAKoB,KAAL,CAAWpB,cAAX,GAA4B,eAAvE,GAA2F,KAAKQ,YAAL,CAAkBoF,WAAlB,CAH9F,CADF;;;AAOD,CAxRwC,CAAjB,CAA1B,C;;;AA2RehG,iB;;AAEf,GAAMqH,QAAS3H,WAAW6H,MAAX,CAAkB;AAC/BD,UAAW;AACTE,KAAM,CADG,CADoB;;AAI/BC,yBAA0B;AACxBD,KAAM,CADkB,CAJK,CAAlB,CAAf","file":"index.js","sourcesContent":["const React = require(\"react\");\nconst { Component } = React;\nimport PropTypes from \"prop-types\";\nimport createReactClass from \"create-react-class\";\nconst ReactNative = require(\"react-native\");\nconst {\n  Dimensions,\n  View,\n  Animated,\n  ScrollView,\n  StyleSheet,\n  Platform,\n} = ReactNative;\nimport { InteractionManager, ViewPropTypes } from \"../../Utils\";\nconst TimerMixin = require(\"react-timer-mixin\");\nimport _ from \"lodash\";\n\nconst SceneComponent = require(\"./SceneComponent\");\nconst { DefaultTabBar } = require(\"./DefaultTabBar\");\nconst { ScrollableTabBar } = require(\"./ScrollableTabBar\");\n\nconst ScrollableTabView = createReactClass({\n  mixins: [TimerMixin],\n  statics: {\n    DefaultTabBar,\n    ScrollableTabBar,\n  },\n\n  propTypes: {\n    tabBarPosition: PropTypes.oneOf([\"top\", \"bottom\", \"overlayTop\", \"overlayBottom\"]),\n    initialPage: PropTypes.number,\n    page: PropTypes.number,\n    onChangeTab: PropTypes.func,\n    onScroll: PropTypes.func,\n    renderTabBar: PropTypes.any,\n    style: ViewPropTypes.style,\n    contentProps: PropTypes.object,\n    scrollWithoutAnimation: PropTypes.bool,\n    locked: PropTypes.bool,\n    prerenderingSiblingsNumber: PropTypes.number,\n  },\n\n  getDefaultProps() {\n    return {\n      tabBarPosition: \"top\",\n      initialPage: 0,\n      page: -1,\n      onChangeTab: () => {},\n      onScroll: () => {},\n      contentProps: {},\n      scrollWithoutAnimation: false,\n      locked: false,\n      prerenderingSiblingsNumber: 0,\n    };\n  },\n\n  getInitialState() {\n    return {\n      currentPage: this.props.initialPage,\n      scrollValue: new Animated.Value(this.props.initialPage),\n      containerWidth: Dimensions.get(\"window\").width,\n      sceneKeys: this.newSceneKeys({ currentPage: this.props.initialPage }),\n    };\n  },\n\n  componentDidMount() {\n    const scrollFn = () => {\n      if (this.scrollView) {\n        this.state.scrollValue.setValue(this.props.initialPage);\n      }\n    };\n    InteractionManager.runAfterInteractions(scrollFn);\n  },\n\n  componentWillReceiveProps(props) {\n    if (props.children !== this.props.children) {\n      this.updateSceneKeys({\n        page: this.state.currentPage,\n        children: props.children,\n      });\n    }\n\n    if (props.page >= 0 && props.page !== this.state.currentPage) {\n      this.goToPage(props.page);\n    }\n  },\n\n  goToPage(pageNumber) {\n    const offset = pageNumber * this.state.containerWidth;\n    if (this.scrollView) {\n      this.scrollView.scrollTo({\n        x: offset,\n        y: 0,\n        animated: !this.props.scrollWithoutAnimation,\n      });\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: pageNumber,\n      callback: this._onChangeTab.bind(this, currentPage, pageNumber),\n    });\n  },\n\n  renderTabBar(props) {\n    if (this.props.renderTabBar === false) {\n      return null;\n    } else if (this.props.renderTabBar) {\n      return React.cloneElement(this.props.renderTabBar(props), props);\n    } else {\n      return <DefaultTabBar {...props} />;\n    }\n  },\n\n  updateSceneKeys({ page, children = this.props.children, callback = () => {} }) {\n    let newKeys = this.newSceneKeys({\n      previousKeys: this.state.sceneKeys,\n      currentPage: page,\n      children,\n    });\n    this.setState({ currentPage: page, sceneKeys: newKeys }, callback);\n  },\n\n  newSceneKeys({ previousKeys = [], currentPage = 0, children = this.props.children }) {\n    let newKeys = [];\n    this._children(children).forEach((child, idx) => {\n      let key = this._makeSceneKey(child, idx);\n      if (this._keyExists(previousKeys, key) || this._shouldRenderSceneKey(idx, currentPage)) {\n        newKeys.push(key);\n      }\n    });\n    return newKeys;\n  },\n\n  _shouldRenderSceneKey(idx, currentPageKey) {\n    let numOfSibling = this.props.prerenderingSiblingsNumber;\n    return idx < currentPageKey + numOfSibling + 1 && idx > currentPageKey - numOfSibling - 1;\n  },\n\n  _keyExists(sceneKeys, key) {\n    return sceneKeys.find(sceneKey => key === sceneKey);\n  },\n\n  _makeSceneKey(child, idx) {\n    return child.props.heading + \"_\" + idx;\n  },\n\n  renderScrollableContent() {\n    const scenes = this._composeScenes();\n    return (\n      <ScrollView\n        horizontal\n        pagingEnabled\n        automaticallyAdjustContentInsets={false}\n        contentOffset={{\n          x: this.props.initialPage * this.state.containerWidth,\n        }}\n        ref={scrollView => {\n          this.scrollView = scrollView;\n        }}\n        onScroll={e => {\n          const offsetX = e.nativeEvent.contentOffset.x;\n          this._updateScrollValue(offsetX / this.state.containerWidth);\n        }}\n        onMomentumScrollBegin={this._onMomentumScrollBeginAndEnd}\n        onMomentumScrollEnd={this._onMomentumScrollBeginAndEnd}\n        scrollEventThrottle={16}\n        scrollsToTop={false}\n        showsHorizontalScrollIndicator={false}\n        scrollEnabled={!this.props.locked}\n        directionalLockEnabled\n        alwaysBounceVertical={false}\n        keyboardDismissMode=\"on-drag\"\n        {...this.props.contentProps}\n      >\n        {scenes}\n      </ScrollView>\n    );\n  },\n\n  _composeScenes() {\n    return this._children().map((child, idx) => {\n      let key = this._makeSceneKey(child, idx);\n      return (\n        <SceneComponent\n          key={child.key}\n          shouldUpdated={this._shouldRenderSceneKey(idx, this.state.currentPage)}\n          style={{ width: this.state.containerWidth }}\n        >\n          {this._keyExists(this.state.sceneKeys, key) ? (\n            child\n          ) : (\n            <View heading={child.props.heading} />\n          )}\n        </SceneComponent>\n      );\n    });\n  },\n\n  _onMomentumScrollBeginAndEnd(e) {\n    const offsetX = e.nativeEvent.contentOffset.x;\n    const page = Math.round(offsetX / this.state.containerWidth);\n    if (this.state.currentPage !== page) {\n      this._updateSelectedPage(page);\n    }\n  },\n\n  _updateSelectedPage(nextPage) {\n    let localNextPage = nextPage;\n    if (typeof localNextPage === \"object\") {\n      localNextPage = nextPage.nativeEvent.position;\n    }\n\n    const currentPage = this.state.currentPage;\n    this.updateSceneKeys({\n      page: localNextPage,\n      callback: this._onChangeTab.bind(this, currentPage, localNextPage),\n    });\n  },\n\n  _onChangeTab(prevPage, currentPage) {\n    this.props.onChangeTab({\n      i: currentPage,\n      ref: this._children()[currentPage],\n      from: prevPage,\n    });\n  },\n\n  _updateScrollValue(value) {\n    this.state.scrollValue.setValue(value);\n    this.props.onScroll(value);\n  },\n\n  _handleLayout(e) {\n    const { width } = e.nativeEvent.layout;\n\n    if (Math.round(width) !== Math.round(this.state.containerWidth)) {\n      this.setState({ containerWidth: width });\n      this.requestAnimationFrame(() => {\n        this.goToPage(this.state.currentPage);\n      });\n    }\n  },\n\n  _children(children = this.props.children) {\n    return React.Children.map(children, child => child);\n  },\n\n  render() {\n    let overlayTabs =\n      this.props.tabBarPosition === \"overlayTop\" || this.props.tabBarPosition === \"overlayBottom\";\n    let tabBarProps = {\n      goToPage: this.goToPage,\n      tabs: this._children().map(child => child.props.heading),\n      tabStyle: this._children().map(child => child.props.tabStyle),\n      activeTabStyle: this._children().map(child => child.props.activeTabStyle),\n      textStyle: this._children().map(child => child.props.textStyle),\n      activeTextStyle: this._children().map(child => child.props.activeTextStyle),\n      tabHeaderStyle: this._children().map(child =>\n        _.get(child.props.heading.props, \"style\", undefined)\n      ),\n      activeTab: this.state.currentPage,\n      scrollValue: this.state.scrollValue,\n      containerWidth: this.state.containerWidth,\n    };\n\n    if (this.props.tabBarBackgroundColor) {\n      tabBarProps.backgroundColor = this.props.tabBarBackgroundColor;\n    }\n    if (this.props.tabBarActiveTextColor) {\n      tabBarProps.activeTextColor = this.props.tabBarActiveTextColor;\n    }\n    if (this.props.tabBarInactiveTextColor) {\n      tabBarProps.inactiveTextColor = this.props.tabBarInactiveTextColor;\n    }\n    if (this.props.tabBarTextStyle) {\n      tabBarProps.textStyle = this.props.tabBarTextStyle;\n    }\n    if (this.props.tabBarUnderlineStyle) {\n      tabBarProps.underlineStyle = this.props.tabBarUnderlineStyle;\n    }\n    if (this.props.tabContainerStyle) {\n      tabBarProps.tabContainerStyle = this.props.tabContainerStyle;\n    }\n    if (overlayTabs) {\n      tabBarProps.style = {\n        position: \"absolute\",\n        left: 0,\n        right: 0,\n        [this.props.tabBarPosition === \"overlayTop\" ? \"top\" : \"bottom\"]: 0,\n        backgroundColor: \"rgba(255, 255, 255, 0.7)\",\n      };\n    }\n\n    return (\n      <View style={[styles.container, this.props.style]} onLayout={this._handleLayout}>\n        {(this.props.tabBarPosition === \"top\" || this.props.tabBarPosition===\"overlayTop\")&& this.renderTabBar(tabBarProps)}\n        {this.renderScrollableContent()}\n        {(this.props.tabBarPosition === \"bottom\" || this.props.tabBarPosition===\"overlayBottom\") && this.renderTabBar(tabBarProps)}\n      </View>\n    );\n  },\n});\n\nexport default ScrollableTabView;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  scrollableContentAndroid: {\n    flex: 1,\n  },\n});\n"]}
>>>>>>> ed4cc170b4b458b207825eadc9b8afa744b87130
